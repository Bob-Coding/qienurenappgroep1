<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styling.css">
    <title>Gebruiker profiel</title>

</head>
<header class="main-header">
    <div class="header-section-1">
        <a ref="http://wwww.qien.nl">
            <img src="https://www.qien.nl/wp-content/uploads/2017/10/logo.svg" class="qien-logo" alt="Qien">
        </a>
        <nav class="main-nav-list">
            <!-- list of options or breadcrumbs -->
        </nav>
    </div>
    <div class="header-section-2">
    </div>
    <div class="header-section-3">
        <a href="inlogscherm.html">
            <img src="image/profilepic.png" class="profile-pic" alt="profile">
        </a>
    </div>
</header>
<script>
    function getMedewerker() {
        var jojo = new XMLHttpRequest();
        var id = document.getElementById("empID").value;
        jojo.onreadystatechange = function () {
            if (this.readyState == 4) {
                var databaseContents = JSON.parse(this.responseText);
                var employeeString = "";
                employeeString +=
                    `
                        <div>
                        <p><b>Naam:</b>  ${databaseContents.naam}</p>
                        <p><b>Adres:</b> ${databaseContents.adres}</p>
                        <p><b>Woonplaats:</b> ${databaseContents.woonplaats}</p>
                        <p><b>Postcode:</b> ${databaseContents.postcode}</p>
                        <p><b>Geboortedatum:</b> ${databaseContents.geboorteDatum}</p>
                        <p><b>Telefoonnummer:</b> ${databaseContents.telefoonNummer}</p>
                        <p><b>E-mailadres:</b> ${databaseContents.emailadres}</p>
                        <hr>
                        </div>
                        `
                var maandoverzicht = "";
                maandoverzicht += "<table>" + "<th>" + "Jaar" + "</th>" + "<th>" + "Maand" + "</th>" + "<th>" + "Totaal gewerkte uren" + "</th>" + "<th>" + "id" + "</th>"
                for (var x = 0; x < databaseContents.urenFormulier.length; x++) {
                    maandoverzicht += "<tr>"
                        + "<td>" + `${databaseContents.urenFormulier[x].jaar}` + "</td>"
                        + "<td>" + `${databaseContents.urenFormulier[x].maand}` + "</td>"
                        + "<td>" + `${databaseContents.urenFormulier[x].totaalGewerkteUren}` + "</td>"
                        + "<td>" + `${databaseContents.urenFormulier[x].id}` + "</td>"

                    maandoverzicht += "</tr>";
                }
                maandoverzicht += "</table>"

                document.getElementById("gettingemployee").innerHTML = employeeString + maandoverzicht;
            }
        }
        jojo.open("GET", "http://localhost:8082/api/gebruiker/" + id, true);
        console.log("aliens!")
        jojo.send();
    }

    function getWerkDagenByGebruiker() {
        var jojo = new XMLHttpRequest();
        var id = document.getElementById("empID").value;
        var mnd = document.getElementById("uf-index").value;
        var daglijst = "";
        jojo.onreadystatechange = function () {
            if (this.readyState == 4) {
                var databaseContents = JSON.parse(this.responseText);
                daglijst += "<table>" + "<tr>" + "<th colspan='3'>" + `${databaseContents.urenFormulier[mnd].maand}` + " " +
                    `${databaseContents.urenFormulier[mnd].jaar}` + "</th>" + "</tr>"
                    + "<th>" + "id" + "</th>" + "<th>" + "dag" + "</th>" + "<th>" + "Totaal gewerkte uren" + "</th>"
                for (var x = 0; x < databaseContents.urenFormulier[mnd].werkdag.length; x++) {
                    daglijst += "<tr>"
                        + "<td>" + `${databaseContents.urenFormulier[mnd].werkdag[x].id}` + "</td>"
                        + "<td>" + `${databaseContents.urenFormulier[mnd].werkdag[x].datumDag}` + "</td>"
                        + "<td>" + `${databaseContents.urenFormulier[mnd].werkdag[x].uren}` + "</td>"
                    daglijst += "</tr>";
                }
                daglijst += "</table>"

                document.getElementById("werkdagenlijst").innerHTML = daglijst;
            }
        }
        jojo.open("GET", "http://localhost:8082/api/gebruiker/" + id, true);
        console.log("aliens!")
        jojo.send();
    }

    function getUrenFormByID() {
        var request = new XMLHttpRequest();
        var id = document.getElementById("empID").value;
        var formID = document.getElementById("formID").value;
        request.onreadystatechange = function () {
            if (this.readyState == 4) {
                var databaseContents = JSON.parse(this.responseText);
                var employeeString = "";
                employeeString +=
                    `
                        <div>



                    //    print array here

                        </div>
                        `
                document.getElementById("gettingemployee").innerHTML = employeeString;
            }
        }
        request.open("PUT", "http://localhost:8082/api/gebruiker/" + id, true);
        console.log("aliens!")
        request.send();
    }

    function getMedewerkerNaam() {
        var xhr = new XMLHttpRequest();
        var id = document.getElementById("empID").value;
        xhr.onreadystatechange = function () {
            if (this.readyState == 4) {
                var databaseContents = JSON.parse(this.responseText);
                var medewerkerNaam = databaseContents.naam;

                document.getElementById("shownaam").innerHTML = medewerkerNaam;
            }
        }
        xhr.open("GET", "http://localhost:8082/api/gebruiker/" + id, true);
        xhr.send();
    }

</script>
<!-- call up single medewerker -->

<body>
    <div id="sidebar-left">
        <div class="left-container">
            <button onclick="window.location.href='gebruikeroverzicht.html'">Overzicht gebruiker</button>
            <button onclick="window.location.href='gebruikernieuw.html'">Nieuwe Gebruiker</button>
            <button onclick="window.location.href='gebruikeraanpassen.html'">Gebruiker aanpassen</button>
        </div>
    </div>
    <section>
        <div id="main">
            <div class="container">
                <p><i><a href="https://www.qien.nl/">Qien </a>>>
                        <a href="inlogscherm.html">Log in </a>>>
                        <a href="admin.html">Admin overzicht </a>>>
                        <a href="gebruikeroverzicht.html">Overzicht gebruikers </a>>>
                        Gebruiker profiel</i></p>

                <h1>
                    <div id="shownaam"></div>
                </h1>



                <div class="dashboard">
                    <div id="gettingemployee"></div>
                    <!--            <input type="text" id=empID placeholder="ID">-->
                    <!--            <input type="text" id=maand placeholder="Maand">-->
                    <!--            <input type=button value="Urenfomulier pakken"><br>-->

                    <div id="werkdagenlijst"></div>
                    <!-- <input type="text" id=reiskostMaand placeholder="Maand"> -->
                    <!-- <input type=button value="Reiskosten vergoeding"><br> -->
                    <!-- <input type=button value="Vakantiedagen aanvrag checken"> -->
                </div>
                <input type=text id=empID placeholder="Employee ID">
                <input type="button" onclick="getMedewerker(),getMedewerkerNaam()" value="show">
                <input type="text" id="uf-index" placeholder="urenformulierindex">
                <input type="button" onclick="getWerkDagenByGebruiker()" value="show">
            </div>
        </div>
    </section>

</body>
<footer>
    <div class="container">
        <small>Â© 2020 Team1 - Het beste Team </small> <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ"
            title="Contact">Contact
            Qien</a>
    </div>
</footer>

</html>